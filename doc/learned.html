<!DOCTYPE html>
<html>
	<head>
		<title>goodui gitclass - learned</title>
		<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
	</head>
	<body>
		<div class="container">

		<div class="navbar">
			<div class="navbar-inner">
				<a class="brand" href="../index.html">goodui - a gitClass</a>
				<ul class="nav">
					<li><a href="stack.txt">stack</a></li>
					<li class="active"><a href="learned.html">learned</a></li>
				</ul>
			</div>
		</div>


		<h1>Questions + answers = knowledge</h1>


		<h2>Q000 - What example domain should I use?</h2>

		<p>OK, this is a pseudo-question - but whatever! I'll start with a simple thing I have in mind:</p>

		<p>Some friends and I meet every week for different... erh... activities. We have a web page for each <strong>Activity</strong>.<br>
			One we call Fintentisch - we play boardgames.<br>
			Another one is Ultimate - in summer we meet for playing Ultimate Frisbee.<br>
			For each activity we want to have an editable list of upcoming <strong>Event</strong>s, each with its date and the list of <strong>Person</strong>s who will attend or be absent respectively.</p>

		<p>This leaves us with two things:<p>

		<ol>
			<li>a domain model as simple as in the diagram below</li>
			<li>the next question</li>
		</ol>

		<img src="img/domain-model-uml.png"/>


		<h2>Q001 - What's a good way to implement a client-side application model?</h2>

		<p>First finding: No strong type system, right! As a Java guy I assumed I'd go and define my data model using interfaces and classes. But yeah...</p>
		
        <p>Second finding: <a href="http://backbonejs.org/">Backbone.js</a> holds some great features that will certainly come in handy later:</p>
		
        <ol>
		  <li>Model base type with  support
          for data change events</li><li>Views</li>
          <li>Routers (View flow control)</li>
          <li>REST/AJAX support</li>
		  <li>Validation methods</li>
		  <li>Collections</li>
          <li>HTML escaping support</li>
          <li>...</li>
		</ol>
          
        <p>I'll try a first shot at the <a href="src/main/webapp/js/model.js">model</a> based on an <a href="http://backbonejs.org/docs/todos.html">example with annotated source</a>:</p>

        <pre>$(function() {
	
	window.Activity = Backbone.Model.extend({
		defaults: function() {
		  return {
			name: "Nameless activity"
		  };
		}
	});
	
	window.Event = Backbone.Model.extend({
		defaults: function() {
		  return {
			date: "2012-12-21",
			attending: [],
			absent: []
		  };
		}
	});
	
	window.EventList = Backbone.Collection.extend({
		model: Event,
		localStorage: new Store("events"),
	});
	
});</pre>

        <p>... and some hack necessary to display the data:</p>
        
        <pre>var Events = new EventList;

Events.on(&quot;add&quot;, function(item) {
	$('#events-table').append(...);
});

...

Events.add(new Event({date: '2012-12-15', attending: ['Frank', 'Ada', 'Dan'], absent: ['Michi']}));</pre>

        <p>OK, modifying the EventList or its items fires events for which we can register listener functions. Works as expected - nice.</p>
        
        <p>Inside my listener function I mess with the DOM in an imperative way, which will obfuscate things in no time. This brings up the next question:</p>
        
        <h2>Q002 - How can I describe my data's representation in a declarative way?</h2>
        
    	</div> <!-- container -->
	</body>
</html>
